# 應用頁面 UI/UX 與邏輯改善計劃

**日期**: 2026-01-06  
**範圍**: 提醒應用頁面 (`/app`) 改善  
**相關**: 登陸頁面重構與行動裝置響應式修復

---

## 📋 執行摘要

本計劃概述提醒應用頁面 (`ReminderApp` 組件) 的改善重點：
1. **UI/UX 增強** - 現代化、一致的設計，與登陸頁面保持一致
2. **行動裝置響應式** - 修復寬度溢出問題並改善行動裝置體驗
3. **程式碼組織** - 更好的組件結構與可維護性
4. **效能** - 優化渲染與狀態管理
5. **無障礙性** - 確保 Lighthouse 無障礙分數達到 100%

---

## 🎯 現況分析

### ✅ 運作良好的部分
- 核心功能（CRUD 操作）穩定
- 使用信號的狀態管理運作正確
- 通知提示提供良好的回饋
- 篩選、搜尋與排序功能存在
- 統計顯示提供有用的指標
- 空狀態處理已實作
- 刪除確認模態框防止誤操作

### ⚠️ 需要改善的區域

#### 1. **UI/UX 問題**
- 標題設計可能不符合現代登陸頁面風格
- 卡片佈局可以更精緻
- 表單樣式可能需要一致性改善
- 篩選標籤可以有更好的視覺設計
- 搜尋/排序控制項佈局可以改善
- 統計顯示可以更美觀
- 操作按鈕（編輯/刪除）可以有更好的圖示/樣式

#### 2. **行動裝置響應式**
- 可能有寬度溢出問題（類似登陸頁面）
- 觸控目標可能需要驗證（最小 48x48px）
- 表單輸入可能未針對行動裝置優化
- 卡片佈局可能需要行動裝置特定調整
- 篩選標籤可能需要響應式處理
- 統計可能需要行動裝置佈局變更

#### 3. **程式碼組織**
- 所有邏輯在一個組件檔案中（約 227 行）- 可以拆分
- 表單、卡片、統計已分離（良好），但應用邏輯可以更乾淨
- 狀態管理已集中（良好），但可以提取到 hooks/helpers

#### 4. **視覺一致性**
- 設計語言應與登陸頁面美學一致
- 顏色、漸變、陰影應保持一致
- 字體排版應與登陸頁面對齊
- 間距與內距應遵循設計系統

---

## 📐 改善計劃

### 階段一：行動裝置響應式修復（優先級：高）

**目標**：修復行動裝置佈局問題並確保正確的視窗約束

#### 任務：
1. **在 `responsive.css` 中新增行動裝置樣式**
   - 為應用頁面新增 `@media (max-width: 768px)` 規則
   - 修復 `.app-container` 寬度約束（`width: 100%`、`max-width: 100%`、`box-sizing: border-box`）
   - 新增 `overflow-x: hidden` 以防止橫向滾動
   - 調整行動裝置內距（從小螢幕的 20px 減少到 16px）

2. **行動裝置標題改善**
   - 在行動裝置上垂直堆疊標題內容
   - 減少行動裝置標題內距
   - 調整行動裝置字體大小
   - 確保按鈕觸控目標 ≥48x48px

3. **行動裝置表單調整**
   - 行動裝置上全寬輸入
   - 表單欄位間更好的間距
   - 調整行動裝置按鈕大小
   - 改善行動裝置上的 datetime-local 輸入

4. **行動裝置卡片佈局**
   - 行動裝置上全寬卡片
   - 調整卡片內距
   - 如需要，垂直堆疊操作按鈕
   - 改善編輯/刪除按鈕的觸控目標

5. **行動裝置篩選標籤**
   - 確保標籤適合觸控（≥48x48px）
   - 如需要考慮橫向滾動
   - 調整標籤間距

6. **行動裝置統計**
   - 在行動裝置上垂直堆疊統計
   - 調整字體大小
   - 減少內距/間距

**需要修改的檔案：**
- `assets/css/responsive.css` - 新增行動裝置樣式
- `assets/css/app.css` - 如需要，檢視並調整基礎樣式

**預估時間**：2-3 小時

---

### 階段二：UI/UX 視覺增強（優先級：中）

**目標**：改善視覺設計以符合登陸頁面品質

#### 任務：

1. **標題重新設計**
   - 檢視標題漸變/樣式以匹配登陸頁面
   - 改善標題字體排版
   - 更好的按鈕樣式（與登陸頁面按鈕一致）
   - 考慮在標題中新增圖示

2. **卡片設計改善**
   - 精緻卡片陰影與邊框
   - 改善卡片懸停狀態
   - 更好的視覺層次（標題、描述、到期日）
   - 改善逾期標籤樣式
   - 更好的完成狀態視覺處理

3. **表單樣式**
   - 改善表單卡片樣式
   - 更好的輸入焦點狀態
   - 改善表單中的按鈕樣式
   - 更好的表單欄位間距
   - 考慮內聯驗證回饋

4. **篩選標籤增強**
   - 現代標籤設計（藥丸形或底線）
   - 更好的活動狀態指示
   - 平滑過渡
   - 考慮標籤的圖示支援

5. **搜尋/排序控制項**
   - 更好的佈局（桌面並排，行動裝置堆疊）
   - 改善輸入樣式
   - 更好的選擇下拉選單樣式
   - 考慮新增清除/搜尋圖示

6. **統計顯示**
   - 更美觀的統計卡片
   - 更好的顏色編碼
   - 每個統計的圖示
   - 改善間距與字體排版

7. **操作按鈕**
   - 用適當的圖示組件替換表情符號圖示（如可用）或更好的樣式按鈕
   - 改善按鈕懸停狀態
   - 按鈕間更好的間距
   - 考慮無障礙性工具提示

**需要修改的檔案：**
- `assets/css/app.css` - 更新樣式
- `src/components/reminder_app.rs` - 如需要，更新 JSX 結構
- `src/components/cards.rs` - 如需要，更新卡片組件
- `src/components/forms.rs` - 如需要，更新表單組件

**預估時間**：4-5 小時

---

### 階段三：程式碼組織與重構（優先級：中）

**目標**：改善程式碼可維護性與組織

#### 任務：

1. **提取自訂 Hooks/Helpers**（如有利）
   - 考慮將通知狀態管理提取到 hook
   - 考慮提取表單狀態管理模式
   - 保持簡單 - 僅在明顯改善可讀性時執行

2. **組件結構檢視**
   - 檢視是否應從 `ReminderApp` 提取任何子組件
   - 考慮建立 `ControlsSection` 組件（搜尋 + 排序）
   - 考慮建立 `RemindersList` 組件包裝器
   - 保持實用 - 不要過度設計

3. **狀態管理優化**
   - 檢視信號使用以提升效能
   - 如需要考慮記憶化（Dioxus 處理良好）
   - 確保適當清理（通知自動關閉）

4. **型別安全改善**
   - 檢視篩選/排序型別安全（目前使用字串）
   - 考慮篩選/排序型別的列舉
   - 如需要改善錯誤處理

**需要修改的檔案：**
- `src/components/reminder_app.rs` - 如需要，重構
- `src/utils.rs` - 如需要，新增輔助函數
- 如果提取組件，可能需要建立新的組件檔案

**預估時間**：3-4 小時

---

### 階段四：無障礙性與效能（優先級：高）

**目標**：確保 Lighthouse 無障礙分數 100% 與最佳效能

#### 任務：

1. **無障礙性稽核**
   - 驗證所有互動元素有適當的 ARIA 標籤
   - 確保鍵盤導航正常運作
   - 使用螢幕閱讀器測試
   - 驗證顏色對比度
   - 確保觸控目標 ≥48x48px
   - 驗證焦點指示器可見

2. **效能優化**
   - 檢視列表渲染效能（如需要虛擬滾動）
   - 優化重新渲染（Dioxus 處理良好，但需驗證）
   - 檢視儲存操作（確保不阻塞 UI）
   - 如需要考慮防抖搜尋輸入

3. **錯誤處理**
   - 改善儲存操作的錯誤處理
   - 更好的錯誤使用者回饋
   - 如果儲存失敗，優雅降級

**需要修改的檔案：**
- `src/components/reminder_app.rs` - 新增 ARIA 標籤，改善錯誤處理
- `assets/css/app.css` - 確保焦點指示器，觸控目標
- `src/storage.rs` - 檢視錯誤處理

**預估時間**：2-3 小時

---

### 階段五：額外 UX 改善（優先級：低）

**目標**：完善與增強使用者體驗

#### 任務：

1. **鍵盤快捷鍵**
   - 新增 "n" 建立新提醒
   - 新增 "Esc" 關閉表單/模態框
   - 新增 "/" 聚焦搜尋
   - 在工具提示/說明中顯示鍵盤快捷鍵

2. **更好的空狀態**
   - 改善空狀態設計
   - 新增插圖或圖示
   - 根據篩選狀態更好的訊息

3. **載入狀態**
   - 如需要新增骨架載入器
   - 更好的初始載入體驗
   - 平滑過渡

4. **動畫與過渡**
   - 新增/移除時的平滑卡片動畫
   - 更好的表單過渡
   - 平滑篩選過渡
   - 考慮微妙的動畫以提升 UX

5. **批次操作**（未來考量）
   - 選擇多個提醒
   - 批次刪除
   - 批次完成

**需要修改的檔案：**
- 各種組件檔案
- 動畫 CSS

**預估時間**：4-5 小時（可選，可延後）

---

### 階段六（進階功能：行事曆視圖 / 多視圖 / 標籤群組）（優先級：中～高）

**目標**：在 `/app` 提供更強的「瀏覽與組織」能力：

- 行事曆視圖（Calendar View）快速掌握哪天有到期提醒
- 多視圖切換（列表 / 卡片預覽 / 資料夾群組）
- 標籤（Tag/Label）用於分組、篩選、預覽顯示

#### 6.1 功能需求定義

**A) 行事曆視圖（Calendar View）**
- **月視圖（Month Grid）**：以月份格狀顯示
  - 每個日期格顯示「當日到期提醒數量」與「逾期提醒提示」（逾期可用醒目顏色/小點）
  - **點擊日期**：顯示該日提醒清單（桌面可右側欄/下方列表；行動端可下拉區塊）
  - **快速回到今天**：Today 按鈕
  - **切換月份**：上一月/下一月
- **未排程（No due date）**：沒有 `due_date` 的提醒
  - 建議顯示在行事曆旁/下方的「未排程」區塊（不塞進日期格）

**B) 多視圖切換（Views）**
- **視圖類型**（建議 4 段切換）：
  - `列表`（List）
  - `卡片`（Card Preview）
  - `資料夾`（Folder / Group）
  - `行事曆`（Calendar）
- **共同規則**：
  - 篩選（all/active/completed）、搜尋、排序應在不同視圖下盡量一致（行事曆除外，見排序規則）
  - 行動端優先：切換按鈕需 ≥48x48px，並避免橫向溢出

**C) 標籤/群組（Tags / Grouping）**
- **提醒支援多標籤**：一個提醒可有 0..N 個標籤
- **標籤管理**：
  - 建立/重新命名/刪除標籤（刪除時要決定：是移除所有關聯，或保留但不可選）
  - 標籤顏色（建議支援）：卡片與資料夾視圖會更直覺
- **用法**：
  - 列表/卡片視圖：提醒卡片顯示 tag chips
  - 篩選：依單一或多個標籤篩選
  - 資料夾視圖：以 tag 作為群組「資料夾卡片」

#### 6.2 資料模型（建議）

**Tag**
- `id: String`
- `name: String`
- `color: String`（例如 `#RRGGBB` 或有限色票 key）

**Reminder（擴充）**
- 新增 `tag_ids: Vec<String>`

> 備註：如果你希望「資料夾」是強概念（每個提醒只能屬於一個資料夾），可再加 `folder_id: Option<String>`。  
> 但為了先做出成果，建議先用 `Tag` 直接實作群組（資料夾視圖＝以 Tag 群組）。

#### 6.3 儲存與遷移策略（localStorage）

**需求**：現有使用者已有資料，新增欄位不能把舊資料讀壞。

建議策略（擇一即可）：
- **策略 A：版本化 key（推薦）**
  - 新 key：`reminders_v2`、`tags_v1`
  - 啟動時：若 `reminders_v2` 不存在，嘗試讀 `reminders`（舊格式）並遷移到 v2（補上 `tag_ids: []`）
- **策略 B：同 key 但可選欄位**
  - `tag_ids` 設為可選，讀取時沒有就補空陣列（需要 serde default）

#### 6.4 排序/群組規則（跨視圖一致性）

**列表/卡片視圖排序（建議預設）**
- `逾期` → `今天` → `未來` → `無到期日`
- 次排序：同一類別內可依時間/標題

**資料夾視圖排序**
- 群組卡片排序：依群組內「最近到期時間」或「逾期數量」
- 群組內提醒：沿用列表排序規則

**行事曆視圖**
- 主畫面是「日期聚合」，不是全域排序
- 點選日期後的清單才套用列表排序規則

#### 6.5 i18n（多語系）需求

新增的所有 UI 文案必須補齊三語：
- `assets/i18n/en.json`
- `assets/i18n/zh-Hans.json`
- `assets/i18n/zh-Hant.json`

建議 key 命名（示例）：
- `app.views.list`, `app.views.card`, `app.views.folder`, `app.views.calendar`
- `app.tags.title`, `app.tags.add`, `app.tags.manage`
- `app.calendar.today`, `app.calendar.unscheduled`
- `app.group.by_tag`, `app.group.all_tags`

---

## 🧩 PR 切分建議（約 4 個 PR）

目標：每個 PR 都可獨立合併、可獨立驗收，降低風險與 review 成本。

### PR 1：App 行動裝置修復 + 基礎 UI/UX（無新功能）
- **範圍**：完成「階段一」+（必要的）「階段二」的視覺一致性調整
- **修改**：
  - `assets/css/responsive.css`：補齊 `/app` 的行動端規則（防溢出、排版）
  - `assets/css/app.css`：必要的 UI 微調（header、controls、tabs、cards）
- **驗收**：
  - 行動裝置 375/414 無橫向滾動
  - 所有互動元素觸控目標 ≥48x48px
  - CRUD、篩選、搜尋、排序、Toast、刪除確認全部正常

### PR 2：Tag 資料層 + 遷移 + Tag chips（列表視圖先落地）
- **範圍**：完成「階段六」的資料模型 + 基礎 UI（先不做行事曆/資料夾/卡片）
- **修改**：
  - `src/models.rs`：新增 `Tag` 與 `Reminder.tag_ids`
  - `src/storage.rs`：新增 tags 的 load/save、提醒資料遷移策略（A 或 B）
  - `src/components/forms.rs`：新增選標籤 UI（或先以最小化 UI：僅顯示/儲存）
  - `src/components/cards.rs`：提醒卡片顯示 tag chips
  - `assets/i18n/*.json`：新增 tags 相關文字
- **驗收**：
  - 既有提醒資料不會遺失（遷移後仍可讀）
  - 新增/編輯提醒可設定標籤（至少能保存並顯示）
  - 列表中可看到 tags chips（顏色可先用固定色票）

### PR 3：多視圖切換（List/Card/Folder）+ 以 Tag 群組的「資料夾視圖」
- **範圍**：加入 View Switcher + 新增 Card view + Folder（以 Tag 群組）
- **修改**：
  - `src/components/reminder_app.rs`：視圖狀態、切換 UI
  - 新增（建議）`src/components/app_views/`：
    - `list_view.rs`
    - `card_view.rs`
    - `folder_view.rs`
    - `mod.rs`
  - `assets/css/app.css`：三種視圖的樣式
  - `assets/i18n/*.json`：views 文字
- **驗收**：
  - 三種視圖都不破壞現有功能（CRUD、篩選、搜尋、排序）
  - Folder 視圖可看到「群組卡片」（每個 tag 一張），點進去能看該群組提醒
  - Card 視圖可「預覽式卡片」掃描（仍可進行編輯/刪除/完成）

### PR 4：行事曆視圖（Month Grid）+ 日期聚合 + 未排程區
- **範圍**：完成 Calendar view（先做月視圖）
- **修改**：
  - 新增 `src/components/app_views/calendar_view.rs`
  - `src/utils.rs`：日期聚合（按 `YYYY-MM-DD` 分組）與 helper
  - `assets/css/app.css`：行事曆格狀 UI、選取日期樣式、清單區
  - `assets/i18n/*.json`：calendar 文字
- **驗收**：
  - 月視圖顯示每天提醒數量
  - 點日期會顯示該日提醒（套用同一套排序規則）
  - 未排程提醒有清楚區塊
  - 行動端不溢出、可操作（切月/回到今天）

## 📊 實作優先級

### 必須有（發布前）
1. ✅ **階段一：行動裝置響應式修復** - 對行動裝置使用者至關重要
2. ✅ **階段四：無障礙性與效能** - Lighthouse 100% 所需

### 應該有（高價值）
3. ✅ **階段二：UI/UX 視覺增強** - 對使用者滿意度重要
4. ✅ **階段三：程式碼組織** - 對可維護性重要

### 最好有（可延後）
5. ⚠️ **階段五：額外 UX 改善** - 完善，可逐步新增

---

## 🔧 技術方法

### CSS 策略
- 遵循現有模式：`app.css` 中的基礎樣式，`responsive.css` 中的行動裝置樣式
- 使用 CSS 變數以保持一致（來自 `base.css`）
- 儘可能使用行動裝置優先方法
- 使用來自 `utilities.css` 的現有工具類別

### 組件策略
- 保持當前組件結構，除非拆分有明顯好處
- 維持基於屬性的架構
- 使用現有 UI 函式庫組件（`remind_me_ui`）
- 遵循 Dioxus 模式與最佳實踐

### 狀態管理策略
- 繼續使用 `use_signal()` 進行響應式狀態
- 儘可能在組件中保持狀態本地化
- 維持當前儲存模式（localStorage）

---

## 📝 測試檢查清單

每個階段後，驗證：

- [ ] 行動裝置視窗（375px、414px）- 無橫向滾動
- [ ] 桌面視窗（1280px+）- 適當佈局
- [ ] 平板視窗（768px）- 中間佈局運作
- [ ] 所有互動元素的觸控目標 ≥48x48px
- [ ] 鍵盤導航運作（Tab、Enter、Esc）
- [ ] 螢幕閱讀器相容性（使用 NVDA/VoiceOver 測試）
- [ ] Lighthouse 稽核（無障礙性：100%，效能：95%+）
- [ ] 所有功能運作（CRUD 操作）
- [ ] 表單正確驗證
- [ ] 通知提示出現並關閉
- [ ] 篩選、搜尋與排序正確運作
- [ ] 統計正確顯示
- [ ] 空狀態正確顯示
- [ ] 多語言支援運作（en、zh-Hans、zh-Hant）

---

## 📅 預估時程

- **階段一**：2-3 小時（行動裝置響應式）
- **階段二**：4-5 小時（UI/UX 視覺）
- **階段三**：3-4 小時（程式碼組織）
- **階段四**：2-3 小時（無障礙性與效能）
- **階段五**：4-5 小時（額外 UX - 可選）

**總預估時間**：15-20 小時（必須有/應該有：11-16 小時）

---

## 🎯 成功標準

### 最小可行（必須有）
- ✅ 行動裝置上無橫向滾動
- ✅ 所有觸控目標 ≥48x48px
- ✅ Lighthouse 無障礙性：100%
- ✅ Lighthouse 效能：≥95%
- ✅ 所有核心功能在行動裝置上運作

### 目標（應該有）
- ✅ 視覺設計符合登陸頁面品質
- ✅ 改善的程式碼組織
- ✅ 在所有裝置上更好的使用者體驗
- ✅ 平滑過渡與動畫
- ✅ 專業、精緻的外觀

---

## 📚 相關文件

- `.cursor/rules/core/project-structure.mdc` - 組件組織模式
- `.cursor/rules/core/lighthouse-100-standards.mdc` - 無障礙性需求
- `.cursor/rules/core/code-formatting.mdc` - 程式碼風格指南
- `assets/css/app.css` - 當前應用樣式
- `assets/css/responsive.css` - 響應式樣式
- `src/components/reminder_app.rs` - 當前應用組件

---

## 🚀 下一步

1. **檢視並批准此計劃**
2. **從階段一開始：行動裝置響應式修復**
3. **每個階段後徹底測試**
4. **隨著變更更新文件**
5. **完成必須有階段後建立 PR**

---

**最後更新**：2026-01-06  
**狀態**：規劃階段  
**負責人**：開發團隊
