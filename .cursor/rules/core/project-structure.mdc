---
alwaysApply: true
---
# Project Structure and Organization

## üìÅ Directory Structure

```
remind-me-pwa/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ main.rs              # Main application entry point
‚îÇ   ‚îú‚îÄ‚îÄ app.rs               # Main App component and routing
‚îÇ   ‚îú‚îÄ‚îÄ i18n.rs              # Internationalization system
‚îÇ   ‚îú‚îÄ‚îÄ router.rs             # Routing logic
‚îÇ   ‚îú‚îÄ‚îÄ components/           # Reusable components (organized by purpose)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ landing.rs       # Landing page (main landing component)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ landing_layout.rs # Landing layout (navbar, footer)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page_template.rs  # Public page template (navbar + footer wrapper)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ reminder_app.rs   # Main reminder app component
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ legal.rs         # Legal pages (Privacy Policy, Terms of Use)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ language_switcher.rs # Language switcher component
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ media.rs         # Media cache components (CachedImage, CachedVideo, etc.)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ forms.rs         # Form components (AddReminderForm, EditReminderForm)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cards.rs         # Card components (ReminderCard)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ modals.rs        # Modal components (DeleteConfirmModal)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ statistics.rs     # Statistics display components
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ mod.rs          # Component module exports
‚îÇ   ‚îî‚îÄ‚îÄ services/            # Service modules
‚îÇ       ‚îî‚îÄ‚îÄ media_cache.rs   # Media caching service (Cache Storage API)
‚îú‚îÄ‚îÄ assets/
‚îÇ   ‚îú‚îÄ‚îÄ css/                 # Stylesheets (split for maintainability)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base.css         # Reset, variables, base styles
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components.css   # Reusable components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app.css          # App-specific styles
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ landing.css      # Landing page styles
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.css       # Navbar, footer, menu
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utilities.css    # Utility classes
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ responsive.css   # Media queries
‚îÇ   ‚îú‚îÄ‚îÄ i18n/                # Internationalization translations
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ en.json          # English translations
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ zh-Hans.json     # Simplified Chinese (ÁÆÄ‰Ωì‰∏≠Êñá)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ zh-Hant.json     # Traditional Chinese (ÁπÅÈ´î‰∏≠Êñá)
‚îÇ   ‚îú‚îÄ‚îÄ manifest.json        # PWA manifest configuration
‚îÇ   ‚îî‚îÄ‚îÄ sw.js                # Service worker for offline support
‚îú‚îÄ‚îÄ .cursor/
‚îÇ   ‚îî‚îÄ‚îÄ rules/               # Cursor AI rules and documentation
‚îÇ       ‚îú‚îÄ‚îÄ core/            # Core development rules
‚îÇ       ‚îú‚îÄ‚îÄ features/        # Feature-specific rules
‚îÇ       ‚îú‚îÄ‚îÄ templates/       # Code templates
‚îÇ       ‚îî‚îÄ‚îÄ skills.md        # Skills and capabilities reference
‚îú‚îÄ‚îÄ .github/
‚îÇ   ‚îî‚îÄ‚îÄ workflows/
‚îÇ       ‚îî‚îÄ‚îÄ github-pages-deploy.yml  # GitHub Actions CI/CD (branch-based deployment)
‚îú‚îÄ‚îÄ .cargo/
‚îÇ   ‚îî‚îÄ‚îÄ config.toml          # Cargo build configuration
‚îú‚îÄ‚îÄ docs/                     # Build output directory (for GitHub Pages)
‚îú‚îÄ‚îÄ Cargo.toml               # Rust dependencies and build profiles
‚îú‚îÄ‚îÄ Cargo.lock               # Locked dependency versions
‚îú‚îÄ‚îÄ Dioxus.toml              # Dioxus framework configuration
‚îú‚îÄ‚îÄ run-dev.sh               # Local development server script (development mode)
‚îú‚îÄ‚îÄ run-release.sh           # Production server script (for performance testing)
‚îú‚îÄ‚îÄ deploy.sh                # Deployment script
‚îú‚îÄ‚îÄ README.md                # Project documentation
‚îî‚îÄ‚îÄ DEPLOYMENT.md            # Deployment guide
```

## üìù File Naming Conventions

### Source Files
- `main.rs` - Main application entry point (contains all components)
- `lib.rs` - Library code (if splitting into modules later)

### Asset Files
- `css/` - Stylesheets directory (split into 7 files for maintainability)
  - `base.css` - Reset, CSS variables, base HTML/body styles
  - `components.css` - Reusable UI components (buttons, forms, tabs)
  - `app.css` - App-specific styles (reminder app)
  - `landing.css` - Landing page styles
  - `layout.css` - Navbar, footer, mobile menu
  - `utilities.css` - Utility classes
  - `responsive.css` - Media queries and responsive design
- `i18n/` - Internationalization translations
  - `en.json` - English translations
  - `zh-Hans.json` - Simplified Chinese (ÁÆÄ‰Ωì‰∏≠Êñá)
  - `zh-Hant.json` - Traditional Chinese (ÁπÅÈ´î‰∏≠Êñá)
- `manifest.json` - PWA manifest (JSON format)
- `sw.js` - Service worker (JavaScript)

### Configuration Files
- `Cargo.toml` - Rust package configuration
- `Dioxus.toml` - Dioxus framework configuration
- `.cargo/config.toml` - Cargo build settings

## üèóÔ∏è Application Architecture

### Module Structure

```
src/
‚îú‚îÄ‚îÄ main.rs          # Entry point, launches App
‚îú‚îÄ‚îÄ app.rs           # Main App component (routing, i18n, providers)
‚îú‚îÄ‚îÄ router.rs        # Route enum and URL handling
‚îú‚îÄ‚îÄ i18n.rs          # Internationalization system
‚îú‚îÄ‚îÄ storage.rs       # LocalStorage utilities
‚îú‚îÄ‚îÄ models.rs        # Data models (Reminder, etc.)
‚îú‚îÄ‚îÄ utils.rs         # Utility functions
‚îú‚îÄ‚îÄ deployment.rs    # Deployment utilities (base path, etc.)
‚îú‚îÄ‚îÄ components/     # UI components (organized by purpose)
‚îî‚îÄ‚îÄ services/        # Service modules (media_cache, etc.)
```

### App Component Structure

The `App` component (`src/app.rs`) is the root component that:
1. **Initializes i18n** - Sets up internationalization context
2. **Wraps with MediaCacheProvider** - Provides media caching
3. **Handles routing** - Manages route state and URL updates
4. **Loads CSS** - Loads all 7 CSS files
5. **Renders routes** - Conditionally renders based on current route

### Component Organization

Components are organized by purpose:
- **Pages**: `landing.rs`, `reminder_app.rs`, `legal.rs`
- **Layouts**: `landing_layout.rs`, `page_template.rs`
- **Forms**: `forms.rs` (AddReminderForm, EditReminderForm)
- **Cards**: `cards.rs` (ReminderCard)
- **Modals**: `modals.rs` (DeleteConfirmModal)
- **UI Components**: `language_switcher.rs`, `media.rs`, `statistics.rs`

## üéØ Code Organization in main.rs

### Standard Structure

```rust
// 1. Imports
use dioxus::prelude::*;
use serde::{Deserialize, Serialize};
use chrono::TimeZone;

// 2. Main function
fn main() {
    dioxus::launch(App);
}

// 3. Data structures
#[derive(Clone, Debug, PartialEq, Serialize, Deserialize)]
struct Reminder {
    // fields
}

// 4. Main App component
#[component]
fn App() -> Element {
    // state and logic
    rsx! { /* ... */ }
}

// 5. Sub-components
#[component]
fn AddReminderForm(on_add: EventHandler<Reminder>) -> Element {
    // component logic
    rsx! { /* ... */ }
}

// 6. Utility functions
fn load_reminders() -> Vec<Reminder> {
    // implementation
}

fn save_reminders(reminders: &[Reminder]) {
    // implementation
}
```

## üîß Import Organization

### Standard Import Order

```rust
// 1. Dioxus framework
use dioxus::prelude::*;

// 2. Serde for serialization
use serde::{Deserialize, Serialize};

// 3. Chrono for date/time
use chrono::{Utc, Local, DateTime, NaiveDateTime, TimeZone};

// 4. Web APIs (web-sys)
use web_sys::{window, Storage};

// 5. Standard library
use std::collections::HashMap;
```

## üé® Naming Conventions

### Components
- `PascalCase` - `App`, `ReminderCard`, `AddReminderForm`
- Descriptive names - `ReminderCard`, not `Card`

### Functions
- `snake_case` - `load_reminders`, `save_reminders`, `format_date`
- Private helpers - `_helper_function` (if needed)

### Variables
- `snake_case` - `reminders`, `show_add_form`, `filter`
- Signals - `use_signal(|| value)` pattern

### Constants
- `UPPER_CASE` - `CACHE_NAME`, `MAX_ITEMS`

## üìã Component Patterns

### Component with State

```rust
#[component]
fn ComponentName() -> Element {
    let mut state = use_signal(|| initial_value);
    
    rsx! {
        div {
            // JSX-like syntax
        }
    }
}
```

### Component with Props

```rust
#[component]
fn ComponentName(
    prop1: String,
    prop2: i32,
    on_action: EventHandler<String>,
) -> Element {
    rsx! {
        div {
            "{prop1}: {prop2}"
            button {
                onclick: move |_| on_action.call("value".to_string()),
                "Click"
            }
        }
    }
}
```

## üóÇÔ∏è Asset Organization

### CSS Structure
- **Modular CSS**: Split into 7 files in `assets/css/` for better maintainability
  - `base.css`: Reset, CSS variables, base HTML/body styles
  - `components.css`: Reusable UI components (buttons, forms, tabs, badges)
  - `app.css`: App-specific styles (reminder app, cards, forms)
  - `landing.css`: Landing page styles (hero, features, pricing, FAQ)
  - `layout.css`: Layout components (navbar, footer, mobile menu)
  - `utilities.css`: Utility classes (spacing, text, layout helpers)
  - `responsive.css`: Media queries and responsive design rules
- All CSS files are loaded in `src/app.rs` via Dioxus asset pipeline
- Component-specific styles use classes, not inline styles
- Responsive design with mobile-first approach

### Internationalization (i18n)
- **Translation Files**: Located in `assets/i18n/`
  - `en.json`: English translations
  - `zh-Hans.json`: Simplified Chinese (ÁÆÄ‰Ωì‰∏≠Êñá)
  - `zh-Hant.json`: Traditional Chinese (ÁπÅÈ´î‰∏≠Êñá)
- **Locale System**: 
  - `Locale` enum: `En`, `ZhHans`, `ZhHant`
  - Default `"zh"` maps to `zh-Hans` (Simplified Chinese)
  - BCP 47 codes: `en`, `zh-Hans`, `zh-Hant`
- **Language Switcher**: `LanguageSwitcher` component supports all 3 languages
- **Usage**: Use `use_t("key.path")` hook to get translated strings
- **Structure**: Nested JSON keys (e.g., `"landing.nav.features"`)

### Media Caching
- **MediaCacheProvider**: Context provider for shared cache manager
- **MediaCacheManager**: Deduplicates in-flight downloads across components
- **Components**: `ManagedCachedImage`, `ManagedCachedVideo` for cached media
- **Service**: `src/services/media_cache.rs` - Cache Storage API integration
- **Features**: Shimmer loading states, error fallbacks, persistent caching

### Page Templates
- **PublicPageTemplate**: Reusable template for public pages (Privacy Policy, Terms of Use)
  - Wraps content with `LandingNavbar` and `LandingFooter`
  - Provides consistent layout structure
  - Used in `src/components/legal.rs` for legal pages
  - Props: `title`, `active_section`, `on_enter_app`, `on_jump`, `on_navigate`, `children`

### PWA Files
- `manifest.json`: App metadata, icons, display mode
- `sw.js`: Service worker for caching and offline support

## üéØ Best Practices

### DO:
- ‚úÖ Keep all components in `main.rs` for small projects
- ‚úÖ Use descriptive component names
- ‚úÖ Organize imports logically
- ‚úÖ Use `use_signal()` for reactive state
- ‚úÖ Follow Rust naming conventions

### DON'T:
- ‚ùå Don't create unnecessary files for small projects
- ‚ùå Don't use abbreviations in component names
- ‚ùå Don't mix concerns (keep components focused)
- ‚ùå Don't forget to handle Option/Result types
