---
alwaysApply: false
description: Internationalization (i18n) patterns for multi-language support
---

# Internationalization (i18n) Patterns

## ğŸ¯ Overview

The project supports **3 languages**:
- **English** (`en`) - Default language
- **Simplified Chinese** (`zh-Hans`) - ç®€ä½“ä¸­æ–‡
- **Traditional Chinese** (`zh-Hant`) - ç¹é«”ä¸­æ–‡

## ğŸ“ Translation Files

**Location**: `assets/i18n/`

- `en.json` - English translations
- `zh-Hans.json` - Simplified Chinese (ç®€ä½“ä¸­æ–‡)
- `zh-Hant.json` - Traditional Chinese (ç¹é«”ä¸­æ–‡)

**Structure**: Nested JSON keys for organization
```json
{
  "app": {
    "title": "Remind Me PWA",
    "tagline": "Reminder Assistant"
  },
  "landing": {
    "nav": {
      "features": "Features",
      "pricing": "Pricing"
    }
  },
  "language": {
    "switch": "Switch language",
    "en": "English",
    "zh-Hans": "ç®€ä½“ä¸­æ–‡",
    "zh-Hant": "ç¹é«”ä¸­æ–‡"
  }
}
```

## ğŸ”§ Locale System

### Locale Enum

```rust
pub enum Locale {
    En,      // English
    ZhHans,  // Simplified Chinese (ç®€ä½“ä¸­æ–‡)
    ZhHant,  // Traditional Chinese (ç¹é«”ä¸­æ–‡)
}
```

### Locale Mapping

- `"zh"` â†’ `Locale::ZhHans` (defaults to Simplified Chinese)
- `"zh-Hans"` â†’ `Locale::ZhHans`
- `"zh-CN"` â†’ `Locale::ZhHans`
- `"zh-Hant"` â†’ `Locale::ZhHant`
- `"zh-TW"` â†’ `Locale::ZhHant`
- `"en"` â†’ `Locale::En`

### BCP 47 Language Codes

- `en` â†’ `en`
- `zh-Hans` â†’ `zh-Hans` (Simplified Chinese)
- `zh-Hant` â†’ `zh-Hant` (Traditional Chinese)

## ğŸ“ Usage Patterns

### Getting Translations

```rust
use crate::i18n::use_t;

#[component]
fn MyComponent() -> Element {
    rsx! {
        h1 { {use_t("app.title")} }
        p { {use_t("app.tagline")} }
        button { {use_t("landing.nav.features")} }
    }
}
```

### Language Switcher Component

```rust
use crate::components::LanguageSwitcher;

#[component]
fn App() -> Element {
    rsx! {
        LanguageSwitcher { 
            class: Some("nav-lang-switcher".to_string()) 
        }
    }
}
```

### Setting Locale Programmatically

```rust
use crate::i18n::{use_i18n, Locale};

#[component]
fn MyComponent() -> Element {
    let i18n = use_i18n();
    
    rsx! {
        button {
            onclick: move |_| {
                let mut ctx = i18n.write();
                ctx.set_locale(Locale::ZhHans);
            },
            "Switch to Simplified Chinese"
        }
    }
}
```

## ğŸŒ URL Integration

### URL Format

- `/en/app` - English app
- `/zh-Hans/app` - Simplified Chinese app
- `/zh-Hant/app` - Traditional Chinese app
- `/en/privacy` - English privacy policy
- `/zh-Hans/terms` - Simplified Chinese terms

### Router Integration

The router automatically:
- Detects locale from URL path
- Maps `"zh"` to `"zh-Hans"` for backward compatibility
- Updates URL when locale changes
- Sets HTML `lang` attribute correctly

## âœ… Best Practices

### DO:
- âœ… Always use `use_t("key.path")` for user-facing text
- âœ… Add translation keys to **all 3 language files** (`en.json`, `zh-Hans.json`, `zh-Hant.json`)
- âœ… Use nested keys for organization (e.g., `"landing.nav.features"`)
- âœ… Keep translation keys consistent across all languages
- âœ… Test language switching functionality
- âœ… Verify HTML `lang` attribute is set correctly
- âœ… Use `LanguageSwitcher` component for language selection

### DON'T:
- âŒ Don't hardcode text strings in components
- âŒ Don't skip adding translations to any language file
- âŒ Don't use `Locale::Zh` (it doesn't exist - use `Locale::ZhHans` or `Locale::ZhHant`)
- âŒ Don't forget to update all 3 translation files when adding new keys
- âŒ Don't use abbreviations in translation keys

## ğŸ”„ Adding New Translations

1. **Add key to English file** (`assets/i18n/en.json`):
```json
{
  "new_section": {
    "title": "New Section Title",
    "description": "New section description"
  }
}
```

2. **Add same key to Simplified Chinese** (`assets/i18n/zh-Hans.json`):
```json
{
  "new_section": {
    "title": "æ–°ç« èŠ‚æ ‡é¢˜",
    "description": "æ–°ç« èŠ‚æè¿°"
  }
}
```

3. **Add same key to Traditional Chinese** (`assets/i18n/zh-Hant.json`):
```json
{
  "new_section": {
    "title": "æ–°ç« ç¯€æ¨™é¡Œ",
    "description": "æ–°ç« ç¯€æè¿°"
  }
}
```

4. **Use in component**:
```rust
rsx! {
    h2 { {use_t("new_section.title")} }
    p { {use_t("new_section.description")} }
}
```

## ğŸ§ª Testing

- Test language switching in the UI
- Verify all text is translated correctly
- Check URL updates when switching languages
- Verify HTML `lang` attribute changes
- Test with all 3 languages
- Ensure no hardcoded text remains

## ğŸ“š Related Files

- `src/i18n.rs` - I18n system implementation
- `src/components/language_switcher.rs` - Language switcher component
- `src/router.rs` - Locale-aware routing
- `src/app.rs` - Locale initialization and URL handling
- `assets/i18n/*.json` - Translation files
